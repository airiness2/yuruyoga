<div class="container">
<h4><%= t('view.diary')%><%= t('view.search') %></h4>

<%= search_form_for @q, url: search_diaries_path do |f| %>
<div class="form-inline">
  <div class="form-group">
    <%= f.label :worked_date, "実施日" %>
    &nbsp;
    &nbsp;
    <%= f.date_field :worked_date_gteq, class: "form-control" %>
      &nbsp;&nbsp;〜&nbsp;&nbsp;
    <%= f.date_field :worked_date_lteq, class: "form-control" %>
  </div>
  &nbsp;
  &nbsp;

  <div class="form-group">
    <%= f.label :pose_name_cont, "ポーズ" %>
    &nbsp;
    &nbsp;
    <%= f.search_field :pose_name_cont, class: "form-control" %>
  </div>
  &nbsp;
  &nbsp;

  <div class="form-group">
    <%= f.label :tags_id_eq, "タグ" %>
    &nbsp;
    &nbsp;
    <%= f.collection_select :tags_id_eq, Tag.all, :id, :name, {include_blank: true}, {class: "form-control"} %>
  </div>
</div>
<p style="margin: 2px">&nbsp;</p>

    <%= check_box_tag :all_user, class: "form-check-input" %>
    <%= f.label :all_user, "自分以外の日記も含める", class: "form-check-label" %>
<br>
<br>
  <%= f.submit "検索", class: "btn btn-outline-primary" %>
  &nbsp;
  &nbsp;
  <%= link_to '検索条件のクリア', request.path, class: "btn btn-outline-secondary btn-sm" %>
<% end %>

<p style="margin: 5px">&nbsp;</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= t('view.worked_date') %></th>
      <th><%= t('view.user') %></th>
      <th><%= t('view.pose') %></th>
      <th><%= t('view.title') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @diaries.each do |diary| %>
      <tr>
        <td><%= diary.worked_date %></td>
        <td><%= diary.user.name %></td>
        <td><%= diary.pose.name %></td>
        <td><%= diary.title %></td>
        <td><%= link_to '詳細', diary %></td>
        <% if diary.user_id == current_user.id %>
          <td><%= link_to '編集', edit_diary_path(diary) %></td>
          <td><%= link_to '削除', diary, method: :delete, data: { confirm: '削除してもよろしいですか?' } %></td>
        <% else %>
          <td colspan="2"></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @diaries %>
<br>
<%= link_to '日記新規作成', new_diary_path, class: "btn btn-outline-primary"   %>
</div>
</div>
